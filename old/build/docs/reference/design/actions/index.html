<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Praxis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Praxis Blog Atom Feed"><title data-react-helmet="true">Actions | Praxis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Actions | Praxis"><meta data-react-helmet="true" name="description" content="Each of the available actions for an endpoint are defined using the action method. At a minimum, an action definition must have a name and at least one route. It&#x27;s a good idea to add a description for each action so Praxis can use it when generating documentation. In addition to a description an action can also specify:"><meta data-react-helmet="true" property="og:description" content="Each of the available actions for an endpoint are defined using the action method. At a minimum, an action definition must have a name and at least one route. It&#x27;s a good idea to add a description for each action so Praxis can use it when generating documentation. In addition to a description an action can also specify:"><meta data-react-helmet="true" property="og:url" content="https://www.praxis-framework.io/docs/reference/design/actions"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.praxis-framework.io/docs/reference/design/actions"><link rel="stylesheet" href="/styles.ab2c79ee.css">
<link rel="preload" href="/styles.27a80096.js" as="script">
<link rel="preload" href="/runtime~main.d759ace7.js" as="script">
<link rel="preload" href="/main.0f7e767c.js" as="script">
<link rel="preload" href="/1.1d955ac3.js" as="script">
<link rel="preload" href="/65.fc2dba12.js" as="script">
<link rel="preload" href="/66.81df1f16.js" as="script">
<link rel="preload" href="/935f2afb.f1e5e5bf.js" as="script">
<link rel="preload" href="/64.4c9a6482.js" as="script">
<link rel="preload" href="/bee54d0d.05c759ba.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Praxis</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/gettingStarted/intro">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/reference/intro">Reference</a><a href="https://github.com/praxis/praxis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Praxis</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/gettingStarted/intro">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/reference/intro">Reference</a></li><li class="menu__list-item"><a href="https://github.com/praxis/praxis" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Intro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/installation">Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/designingApiResources">Designing our API resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/settingUpOurDB">Setting Up Our Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/implementingReads">Implementing Reads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/buildingCRUD">Building CRUD</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/media-types">Media Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/endpoints">Endpoints</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reference/design/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/api-definition">General API Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/response-definitions">Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/traits">Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/doc-generation">Document Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/multipart">Multipart</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Implementation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/controllers">Controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/application">Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/responses">Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/request-life-cycle">Request Life Cycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/multipart">Multipart Types</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/mapper-plugin">Mapper Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/pagination-plugin">Pagination Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/field-selection">Field Selection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/filtering">Filtering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/rendering">Rendering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Internals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/field_selection">FieldSelection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/field_expansion">FieldExpansion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/mapper_selectors">MapperSelectors</a></li></ul></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Actions</h1></header><div class="markdown"><p>Each of the available actions for an endpoint are defined using the <code>action</code> method. At a minimum, an action definition must have a name and at least one route. It&#x27;s a good idea to add a description for each action so Praxis can use it when generating documentation. In addition to a description an action can also specify:</p><ul><li><code>routing</code>: paths that should map to this action</li><li><code>params</code>: the structure of the incoming query string and the parameters you expect tofind in it</li><li><code>payload</code>: the structure of the incoming request body</li><li><code>headers</code>: specific named headers that Praxis should parse and make available to this action</li><li><code>responses</code>: type and code of the possible responses the action can generate</li><li><code>nodoc!</code>: this action should not be included in documentation. Also any types defined withinits payload or parameter blocks will not appear in the generated documentation.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="routing"></a>Routing<a class="hash-link" href="#routing" title="Direct link to heading">#</a></h2><p>The routing block defines the way Praxis will map requests to your actions.
This DSL accepts one or more entries of the form: HTTP verb, path (with colon
encoded capture variables), and options. For example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :index do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get &#x27;blogs&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get &#x27;//orgs/:org_id/blogs&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Praxis has convenience methods for all the HTTP verbs defined in the <a href="http://tools.ietf.org/html/rfc7231#section-4.3" target="_blank" rel="noopener noreferrer">HTTP/1.1
Specification</a> (OPTIONS, GET,
HEAD, POST, PUT, DELETE, TRACE and CONNECT) plus
<a href="http://tools.ietf.org/html/rfc5789" target="_blank" rel="noopener noreferrer">PATCH</a>.</p><p>Praxis also accepts the &#x27;ANY&#x27; verb keyword to indicate that the given route should
match for any incoming verb string. Routes with concrete HTTP verbs will always
take precendence against &#x27;ANY&#x27; verb routes. For instance, take a look at the following
simplistic and contrived example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blogs</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  include Praxis::EndpointDefinition</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  action :show do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    routing { get &#x27;/:id&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description &#x27;Fetch one blog entry&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  action :other do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    routing { any &#x27;/:id&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description &#x27;Do other stuff with non GET verbs&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In this case an incoming <code>&quot;GET /&quot;</code> request will always invoke the <code>:show</code> action,
while others like <code>&quot;POST /&quot;</code> or <code>&quot;PATCH /&quot;</code> will always map the the <code>:other</code> action.
Using the &#x27;ANY&#x27; verb is mostly a convenience to avoid repeating several routes with
the same exact path for an action that needs to respond to all those verbs in the
same manner. There is a subtle difference, however, and that is that using &#x27;ANY&#x27;
will truly accept any incoming HTTP verb string, while listing them in several routes
will need to match the specific supported names. For example, an &#x27;ANY&#x27; route like the
above will be able to match incoming requests like <code>&quot;LINK /&quot;</code> or <code>&quot;UNLINK /&quot;</code> (assuming the Web
server supports it).</p><p>Remember that Praxis prefixes all your resources&#x27; routes with a string based
on the name of your enclosing endpoint definition class, in this case
&#x27;/blogs&#x27; since our class is called <code>Blogs</code>. You can, however, override the prefix for a single route by prepending &#x27;//&#x27; to the path (like in the example above) if you don&#x27;t want the resource-wide prefix to apply. Alternately, you can provide a special prefix of either <code>&#x27;&#x27;</code> or <code>&#x27;//&#x27;</code> in the routing block to clear the prefix for any other paths given.</p><p><em>Note</em>: The above &#x27;resetting&#x27; behavior of &#x27;//&#x27; applies <em>only</em> to any Resource-level route prefixes that may be defined. It will <em>not</em> override an API-wide <code>base_path</code> if one is defined (see <a href="/docs/reference/design/global-api-information/">Global Api Info</a>).</p><p>You can inspect the complete Praxis routing table using <code>praxis routes</code> or <code>rake praxis:routes</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ rake praxis:routes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------------------------------------------------------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Version </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain">        Path         </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Verb </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Resource </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Action </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> implementation </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------------------------------------------------------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> n/a     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> /blogs              </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> GET  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Blogs    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> index  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> -n/a-          </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> n/a     </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> /orgs/:org_id/blogs </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> GET  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Blogs    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> index  </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> -n/a-          </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+---------------------------------------------------------------------------+</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The route command supports the <code>json</code> format parameter (i.e., <code>praxis routes json</code>) to retrieve the complete routing table in JSON format instead of the tabular example above.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="route-parameters"></a>Route parameters<a class="hash-link" href="#route-parameters" title="Direct link to heading">#</a></h3><p>Routes can also take optional parameters. Any of those options passed to the route will be sent to the underlying routing engine (Mustermann). This makes it possible to use advanced features like wildcards, and extra type matching restrictions. For example, the following route will match any url ending with <code>/do_stuff</code> except if it starts with <code>/special</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :wildcards do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    get &#x27;/*/do_stuff&#x27; , except: &#x27;/special*&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &quot;Will match &#x27;/foo/bar/do_stuff&#x27; but not &#x27;/special/do_stuff&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  params do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # :splat will contain the mathing pieces of the wildcards</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :splat, Attributor::Collection.of(String)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Notice in the example above that if we use wilcard operators for our routes, we will also need to declare the
<code>:splat</code> parameter in our action definition. This parameter will contain a collection of strings matching every wildcard in our route (and yes, you can have a route with multiple wildcards). If only one wildcard is used, <code>:splat</code> will still be an array, and will contain a single string element in it. See the <a href="https://github.com/rkh/mustermann" target="_blank" rel="noopener noreferrer">Mustermann site</a> for more information about pattern types and other supported options.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="params"></a>Params<a class="hash-link" href="#params" title="Direct link to heading">#</a></h2><p>Praxis allows you to define the expected structure of incoming request
parameters in the query string, in the URL itself and in the request body
(payload). By doing so, you can let the framework perform basic request
validation and coercion of values into their expected types. This is also a key
component of the Praxis documentation generator.</p><p>In Praxis actions, the <code>params</code> stanza is used to describe incoming parameters that can
be found in both the action path (route) or the query string. In case of name
conflicts, parameters in the path always take precedence over parameters in
the query string.</p><p>You can define the expected structure of URL and query string parameters by
using the <code>params</code> method with a block. Use the standard Attributor::Struct
interface to declare attributes.</p><p>For example, if you want to pass a simple boolean query string parameter in your blog index action you could define it like so:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :index do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing { get &#x27;&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  params do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :force, Attributor::Boolean, default: false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="payload"></a>Payload<a class="hash-link" href="#payload" title="Direct link to heading">#</a></h2><p>Similar to params, you can define the expected structure of the incoming request body
using the <code>payload</code> method. As in the case of <code>params</code>, Attributes are optional
by default, so mark them as required if they must be present so Praxis can
validate them for you.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :create do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing { post &#x27;&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  payload do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :title, String, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :text, String, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :author do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attribute :id, Integer, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :tags, Attributor::Collection.of(String)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Give that payload definition sending the
following request body with an &#x27;application/json&#x27; content type will pass
validation:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;title&quot;: &quot;Why I Ditched My Co-Working Space&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;text&quot;: &quot;Last summer I tried the start-up dream. I moved into...&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;author&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: 29</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Note that unlike other frameworks like Rails and Sinatra, Praxis explicitly
distinguishes payload parameters from URL parameters (path and query string
parameters). Be sure not to expect any parameters coming from the request body
in the <code>params</code> accessor. Request body parameters will only appear in
<code>payload</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="payload-inheritance"></a>Payload inheritance<a class="hash-link" href="#payload-inheritance" title="Direct link to heading">#</a></h3><p>It is common practice (especially in RESTful APIs) to be able to accept incoming resource payloads that closely match outgoing resource responses receive from the same API. For example, if you get a blog MediaType from a show action, it is nice to easily modify parts of it, and re-POST it to the API to save some changes. To help with this, Praxis will maps any payload attribute definition of any action to its corresponding attribute of the default MediaType of the Resource. By doing that, the designer can define attributes by name, without being required to specify the type and/or options that might exist in the associated MediaType.</p><p>In other words: Praxis will inject a <code>:reference</code> parameter to the payload, pointing to the defined default MediaType of the endpoint (refer to <a href="/docs/reference/design/media-types">MediaType</a> for more info). It is for this reason that the following <code>create</code> action payload definition is enough if the default MediaType of the corresponding <code>Post</code> resource has those same attribute names defined.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :create do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing { post &#x27;&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  payload do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :title, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :text, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :author</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :tags</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Also, know that you can mix and match the inherited attributes with other ones that do not exist in the MediaType. For example, the above payload can also add a new attribute called <code>:hidden</code> which includes its type, description or any other options it requires.</p><p>TODO: MultiPart payloads!!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="headers"></a>Headers<a class="hash-link" href="#headers" title="Direct link to heading">#</a></h2><p>Action definitions can call out special request headers that Praxis validates
and makes available to your actions, just like <code>params</code> and <code>payload</code>.  Use the
<code>headers</code> method with the attributor interface for hashes to define request header
expectations:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :create do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing { post &#x27;&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  headers do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    key &quot;Authorization&quot;, String, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In addition to defining a header <code>key</code> in the standard <code>Hash</code> manner, Praxis
also enhances the DSL with a <code>header</code> method that can shortcut the syntax for
certain common cases. The <code>header</code> DSL takes a String name, and an optional type or expected value:</p><ul><li>if no value is passed, the only expectation is that a header with that name is received.</li><li>if a Class is passed, it is used as the type to coerce the header value to.</li><li>if a Regexp value is passed, the expectation is that the header value (if exists) matches it</li><li>if a String value is passed, the expectation is that the incoming header value (if exists) fully matches it.</li></ul><p>Note: specifying both header type <em>and</em> value is not supported with the <code>header</code> method. If you need to use a non-String type and validate the contents in some other way, use the standard <code>key</code> method instead.</p><p>Any hash-like options provided as the last argument are passed along to the
underlying <code>Attributor</code> types. Here are some examples of how to define header expectations:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">headers do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Defining a required header</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  header &quot;Authorization&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Which is equivalent to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key &quot;Authorization&quot;, String, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Defining a non-required header that must match a given regexp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  header &quot;Authorization&quot;, /Secret/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Which is equivalent to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key &quot;Authorization&quot;, String, regexp: /Secret/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Defining a required header that must be equal to &quot;hello&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  header &quot;Authorization&quot;, &quot;hello&quot;, required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Which is equivalent to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key &quot;Authorization&quot;, String, values: [&quot;hello&quot;], required: true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Define a header that is cast as an Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  header &quot;Account-Id&quot;, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # Which is equivalent to</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  key &quot;Account-Id&quot;, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Using the simplified <code>headers</code> syntax can cover most of your typical definitions, while the native
<code>Hash</code> syntax allows you to mix and match many more options. Which one to use is up to you. They
both can perfectly coexist at the same time.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="responses"></a>Responses<a class="hash-link" href="#responses" title="Direct link to heading">#</a></h2><p>All actions must specify the list of responses that they can return. Do this by
using the <code>response</code> method and passing a response name, as well as any additional arguments if applicable.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">action :create do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  routing { post &#x27;&#x27; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  response :on_a_break</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Praxis already provides a set of common responses to work with, but an
application can register its own custom responses too. Each registered response
has a unique name which is the name to use in the call to <code>response</code>.</p><p>If the controller for this action can explicitly return any of the common HTTP errors, its endpoint definition for the action must also explicitly list those responses. For example, if the controller for the <code>:show</code> action uses a &quot;404 Not Found&quot; to indicate that a given resource id is not present in the DB, the response <code>:not_found</code> must be defined in its list of responses. Another way to see this requirement is that any response class that any controller action can return, must have its name listed in the allowed responses of its endpoint definition.</p><p>For more information, please see <a href="/docs/reference/design/responses">Responses</a>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/design/endpoints"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Endpoints</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/design/api-definition"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">General API Definitions Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#routing" class="table-of-contents__link">Routing</a><ul><li><a href="#route-parameters" class="table-of-contents__link">Route parameters</a></li></ul></li><li><a href="#params" class="table-of-contents__link">Params</a></li><li><a href="#payload" class="table-of-contents__link">Payload</a><ul><li><a href="#payload-inheritance" class="table-of-contents__link">Payload inheritance</a></li></ul></li><li><a href="#headers" class="table-of-contents__link">Headers</a></li><li><a href="#responses" class="table-of-contents__link">Responses</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.27a80096.js"></script>
<script src="/runtime~main.d759ace7.js"></script>
<script src="/main.0f7e767c.js"></script>
<script src="/1.1d955ac3.js"></script>
<script src="/65.fc2dba12.js"></script>
<script src="/66.81df1f16.js"></script>
<script src="/935f2afb.f1e5e5bf.js"></script>
<script src="/64.4c9a6482.js"></script>
<script src="/bee54d0d.05c759ba.js"></script>
</body>
</html>