<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Praxis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Praxis Blog Atom Feed"><title data-react-helmet="true">Media Types | Praxis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Media Types | Praxis"><meta data-react-helmet="true" name="description" content="Media types provide the structural representation of the API resources we want to expose. They also commonly have an associated name (i.e., its identifier)."><meta data-react-helmet="true" property="og:description" content="Media types provide the structural representation of the API resources we want to expose. They also commonly have an associated name (i.e., its identifier)."><meta data-react-helmet="true" property="og:url" content="https://www.praxis-framework.io/docs/reference/design/media-types"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://www.praxis-framework.io/docs/reference/design/media-types"><link rel="stylesheet" href="/styles.ab2c79ee.css">
<link rel="preload" href="/styles.27a80096.js" as="script">
<link rel="preload" href="/runtime~main.d759ace7.js" as="script">
<link rel="preload" href="/main.0f7e767c.js" as="script">
<link rel="preload" href="/1.1d955ac3.js" as="script">
<link rel="preload" href="/65.fc2dba12.js" as="script">
<link rel="preload" href="/66.81df1f16.js" as="script">
<link rel="preload" href="/935f2afb.f1e5e5bf.js" as="script">
<link rel="preload" href="/64.4c9a6482.js" as="script">
<link rel="preload" href="/b65b0bc4.3fad35d3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Praxis</strong></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/gettingStarted/intro">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/reference/intro">Reference</a><a href="https://github.com/praxis/praxis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.png" alt="Praxis Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Praxis</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/gettingStarted/intro">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/reference/intro">Reference</a></li><li class="menu__list-item"><a href="https://github.com/praxis/praxis" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Intro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro/installation">Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/intro">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/designingApiResources">Designing our API resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/settingUpOurDB">Setting Up Our Database</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/implementingReads">Implementing Reads</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/gettingStarted/buildingCRUD">Building CRUD</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Design</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reference/design/media-types">Media Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/endpoints">Endpoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/api-definition">General API Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/response-definitions">Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/traits">Traits</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/doc-generation">Document Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/design/multipart">Multipart</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Implementation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/controllers">Controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/application">Application</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/responses">Responses</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/request-life-cycle">Request Life Cycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/implementation/multipart">Multipart Types</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/mapper-plugin">Mapper Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/pagination-plugin">Pagination Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/field-selection">Field Selection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/filtering">Filtering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/extensions/rendering">Rendering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Internals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/field_selection">FieldSelection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/field_expansion">FieldExpansion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/internals/mapper_selectors">MapperSelectors</a></li></ul></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_2WRA"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_CoMu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Media Types</h1></header><div class="markdown"><p>Media types provide the structural representation of the API resources we want to expose. They also commonly have an associated name (i.e., its identifier). </p><p>How does that work? Let&#x27;s take a look at an example. Let&#x27;s say we want to expose Users in our API. In this case, our users MediaType could be defined by a structure that contains an <code>id</code>, <code>name</code> and <code>email</code>, and be represented by the following identifier <code>application/vnd.mycompany.users</code>. So in this case, if a client issues an API to retrieve a user, he will receive a response with <code>Content-Type: application/vnd.mycompany.users+json</code>, which indicates 2 different things: The first one is to indicat what type of attribute <strong>shape</strong> the payload contains (i.e., <code>id</code>, <code>name</code> and <code>email</code> fields). The second one (denoted by the <code>+json</code> suffix) indicates that the returned structure is encoded using JSON. </p><p>Praxis Media-Types are concerned only with the design aspects only (i.e., structure and name), and leaves any encoding concerns to the implementation part. So it is worth noting that a MediaType definition does imply any particular encoding (JSON vs XML...). </p><p>So, how do we define these in Praxis? To define a media type for an API resource, we simply create a class that derives from <code>Praxis::MediaType</code>, where we can define its structure within the <code>attributes</code> section and give it a unique identifier name. A media type can also have a human-readable description, which will show up in any generated documentation.</p><p>Here&#x27;s an example of a simple media type that describes a few attributes for a
hypothetical Blog API resource.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &#x27;A Blog API resource represents...&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  identifier &#x27;application/vnd.acme.blog&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  attributes do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :href, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :owner, Person</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :subject, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :locale do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attribute :language, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attribute :country, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="description"></a>Description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h2><p>You can specify a description for the media type using the <code>description</code>
method. This description string is just for human consumption and is simply inserted directly into to the generated API documentation.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &lt;&lt;-eos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    This is a sample blog.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Which requires a much longer an elaborate description to be written.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  eos</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="identifier"></a>Identifier<a class="hash-link" href="#identifier" title="Direct link to heading">#</a></h2><p>The media type identifier method allows you to associate an Internet media type
string with the MediaType definition. Internet media types should typically be used as unique names (i.e., &#x27;application/vnd.acme.blog&#x27;) that way the client receiving the response knows exactly what structure to expect to find. However, it is not necessary to do so, and they can be also be left withot a name by using just an encoder string (i.e., &#x27;application/json&#x27;).</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  identifier &#x27;application/vnd.acme.blog&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Identifiers have an optional suffix that indicates the encoding format used to represent the media;
for instance, a blog could be represented as an <code>application/vnd.acme.blog+json</code> or a <code>+xml</code>
without changing its essential blog-ness. Identifiers can also have semicolon-delimited options
such as <code>text/html; charset=utf-8</code>..</p><p>In Praxis, media type identifiers are represented by the <code>MediaTypeIdentifier</code> class which parses
the identifier&#x27;s components and makes them available as instance accessors: <code>type</code>, <code>subtype</code>,
<code>suffix</code> and <code>parameters</code>. Identifier objects can be compared, modified, fuzzy-matched against
broader or narrower types, and transformed back into strings.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">MediaTypeIdentifier.load(&#x27;text/plain; charset=utf-8&#x27;).parameters[&#x27;charset&#x27;] # =&gt; &quot;utf-8&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MediaTypeIdentifier.load(&#x27;image/*&#x27;).match(&#x27;image/jpeg&#x27;) # =&gt; true</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="attributes"></a>Attributes<a class="hash-link" href="#attributes" title="Direct link to heading">#</a></h2><p>The attributes section of the media type describes the full structure of the
resource representation. It describes the superset of all possible attributes
that can appear in any view that can be rendered.</p><p>The <code>attributes</code> method expects a block of attribute definitions:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  attributes do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :href, String,        regexp: %r{/blogs/\d+}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :owner, Person,       description: &#x27;Owner of this Blog&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :subject, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :created_at, DateTime</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :visibility, String,  values: [&#x27;public&#x27;,&#x27;private&#x27;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Each attribute has a name, type, description and other specific configuration
options: allowed values, format, examples, etc. While some options, such as
<code>description</code> and <code>values</code> are always available for any attribute, different
attribute types support type-specific options: <code>min</code>/<code>max</code> values for Integers,
<code>regexp</code> for Strings, etc. </p><p>Similarly to the overall MediaType description, the documentation browser will render attribute <code>description</code> values in the generated docs.</p><p>To read more about supported types and defining a complex and rich structures,
take a look at the <a href="https://rubygems.org/gems/attributor" target="_blank" rel="noopener noreferrer">Attributor</a> gem and
other Praxis media type examples.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="default-fielset"></a>Default fielset<a class="hash-link" href="#default-fielset" title="Direct link to heading">#</a></h2><p>One way to think of media types is that they contain the superset of attributes that can ever be returned. Often times, we might want to return only some of those when rendering responses. In fact, we will see in the rendering extensions sections that we can allow the API client to fully specify which subset of the available attributes to return, depending on what it needs.</p><p>As a convenience, especially while developing, it is nice to be able to not have to worry about listing the fields you want rendered. For that reason Praxis Media Types have the concept of a <code>default_fieldset</code>, which defines what attributes to return if no specific fields have been asked for. By default, Praxis will calculate this default fieldset as the set of terminal fields (i.e., simple fields that aren&#x27;t other related MediaTypes). In the case for our Blog above, the <code>default_fieldset</code> will only contain the <code>id</code>, <code>href</code>, <code>subject</code> and <code>locale</code>, but it will leave out the <code>owner</code> as it would recurse into the fields of a <code>Person</code> media type.</p><p>You can easily override the Praxis-picked set of fields and define them yourself using the <code>default_fieldset</code> DSL. For example, the following restrict the default fields to only have <code>id</code>, <code>href</code> and <code>subject</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &#x27;A Blog API resource represents...&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  identifier &#x27;application/vnd.acme.blog&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  attributes do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :href, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :owner, Person</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :subject, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :locale do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attribute :language, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      attribute :country, String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  default_fieldset do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :href</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :subject</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="collections"></a>Collections<a class="hash-link" href="#collections" title="Direct link to heading">#</a></h2><p>Often times, we need to expose arrays of media types. In fact, this is very common for a given media type to embed collections of other related media types or even the case of returning a full top-level collection of mediatypes in an <code>index</code> API response.</p><p>To help in defining those, Praxis provides a <code>Praxis::Collection</code> class.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="praxiscollection"></a>Praxis::Collection<a class="hash-link" href="#praxiscollection" title="Direct link to heading">#</a></h3><p>To define a related collection of mediatype objects, you can use <code>Praxis::Collection.of(media_type)</code>
For example, here is how you would define a collection of related Post media types for your Blog:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  attributes do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :posts, Praxis::Collection.of(Post)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In its underbelly, this <code>Praxis::Collection.of</code> type is backed by the <code>Collection</code> class of Attributor, which also includes the <code>Praxis::MediaTypeCommon</code> module in it. For the folk interested in greedy details, it would be interested to know that this resulting Attributor type is gonna be stored in a <code>Collection</code> constant under the <code>Post</code> mediatype. In other words, one can think of <code>Praxis::Collection.of(Post)</code> to be equivalent to accessing <code>Post::Collection</code>, except that it will create one if it does not exist already. </p><p>As stated above, the created inner <code>Collection</code> class will simply be an <code>Attributor::Collection</code> that wraps members of a given MediaType, and that has an identifier that matches the member&#x27;s identifier, with an added &quot;collection=true&quot; suffix. So in the above case, the <code>Post::Collection</code> will have an identifier of &quot;application/vnd.acme.post;collection=true&quot;.</p><p>This inner <code>Collection</code> should be sufficient in most cases. However, you can explicitly define your own and Praxis will use that instead. Here&#x27;s an example of how to do that if you wanted <code>Post::Collection</code> to have an identifier of &quot;application/vnd.acme.posts&quot; instead:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Post &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  identifier &#x27;application/vnd.acme.post&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  class Collection &lt; Attributor::Collection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    member_type Post</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    identifier &#x27;application/vnd.acme.posts&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Note: When defined without using the <code>.of</code> helper, you use the <code>member_type</code> method to specify what type of media type class this collection is wrapping. If you want a non-anonymous class that is a collection and also has other attributes (such as description), you have two ways to define it:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Option 1: implicit collection type; reopen class to add more information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CommentThread = Praxis::Collection.of(Comment)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class CommentThread</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &#x27;A sequence of comments on a blog post.&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Option 2: explicit collection type with member_type specified inline</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class CommentThread &lt; Praxis::Collection</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  member_type Comment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  description &#x27;A sequence of comments on a blog post.&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="attributorcollection"></a>Attributor::Collection<a class="hash-link" href="#attributorcollection" title="Direct link to heading">#</a></h3><p>An Attributor::Collection (as opposed to <code>Praxis::Collection</code>) is the way to embed a collection of lower-level types that aren&#x27;t media types. In fact they use the same <code>.of(type)</code> method to create the types.</p><p>For example, you may want a collection of tag strings to be an attribute of your blog media type:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ruby codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class Blog &lt; Praxis::MediaType</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  attributes do</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :id, Integer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    attribute :tags, Attributor::Collection.of(String)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  end</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rendering-mediatypes"></a>Rendering mediatypes<a class="hash-link" href="#rendering-mediatypes" title="Direct link to heading">#</a></h2><p>Maybe some of this data is best to be brought up in implementation rendering?....</p><p>????</p><p>Once a media type is defined within your application, you can use it to wrap a
compatible data object holding resource data, and render it using any of the
available views. A compatible object must respond to the method names matching
the media type attribute names, and return sub-objects that are compatible with
the types defined in the media type. Praxis renders media types into <code>Hash</code>
structures to achieve format-independence.  These rendered hash structures can
be formatted in your application using the desired wire encoding (JSON, XML, or
any other type you might need).</p><p>Here are two examples of how to render a blog_object using the <code>Blog</code> media
type: one using its <code>default</code> view and another using its <code>link</code> view:</p><p>{% highlight ruby %}
Blog.render(blog_object, view: :default)
=&gt; {
&#x27;id&#x27; : 123,
&#x27;owner&#x27; : { ...an owner hash rendered with its :compact view...},
&#x27;subject&#x27; : &#x27;First post&#x27;,
&#x27;locale&#x27; : { &#x27;language&#x27;: &#x27;en&#x27;, &#x27;country&#x27;: &#x27;us&#x27; }
}</p><p>Blog.render(blog_object, view: :link)
=&gt; { &#x27;href&#x27; : &#x27;/blogs/123&#x27; }
{% endhighlight %}</p><p>In this example, your <code>blog_object</code> must return:</p><p>{% highlight bash %}
+---------+---------------------------------------------+
| Method  | Return value                                |
|---------+---------------------------------------------|
| id      | integer                                     |
| owner   | object compatible with a Person media type  |
| subject | String                                      |
| locale  | object compatible with the locale structure |
| href    | String                                      |
+---------+---------------------------------------------+
{% endhighlight %}</p><p>Praxis provides a lot of help in managing resource objects and linking them to
data sources (including databases) by integrating with the
<a href="https://rubygems.org/gems/praxis-mapper" target="_blank" rel="noopener noreferrer">Praxis::Mapper</a> gem.</p><p>Also, Praxis allows you to generate compatible objects using the <code>.example</code>
feature of MediaType classes. Using this <code>.example</code> feature you can create
random instances of compatible objects without any extra effort, which is great
to simulate returning data objects when testing controller responses without
requiring any data source access. There is also some help available for
creating realistic examples for your test cases. See more <a href="#examples">examples</a>
at the end of this document.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="examples"></a>Examples<a class="hash-link" href="#examples" title="Direct link to heading">#</a></h2><p>??? TODO????</p><p>Praxis provides tools to automatically generate example object values that will
respond to each and every attribute name of a media type and will return an
object that responds to the correct methods of their defined type, including
when the attribute type is another media type.</p><p>The values of the generated example attributes will also conform to
specifications like default values, regexp, etc.</p><p>Please see <a href="https://rubygems.org/gems/praxis-mapper" target="_blank" rel="noopener noreferrer">Praxis::Mapper</a> and
<a href="https://rubygems.org/gems/attributor" target="_blank" rel="noopener noreferrer">Attributor</a> for more on generating
example objects.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/design/endpoints"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Endpoints Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#description" class="table-of-contents__link">Description</a></li><li><a href="#identifier" class="table-of-contents__link">Identifier</a></li><li><a href="#attributes" class="table-of-contents__link">Attributes</a></li><li><a href="#default-fielset" class="table-of-contents__link">Default fielset</a></li><li><a href="#collections" class="table-of-contents__link">Collections</a><ul><li><a href="#praxiscollection" class="table-of-contents__link">Praxis::Collection</a></li><li><a href="#attributorcollection" class="table-of-contents__link">Attributor::Collection</a></li></ul></li><li><a href="#rendering-mediatypes" class="table-of-contents__link">Rendering mediatypes</a></li><li><a href="#examples" class="table-of-contents__link">Examples</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.27a80096.js"></script>
<script src="/runtime~main.d759ace7.js"></script>
<script src="/main.0f7e767c.js"></script>
<script src="/1.1d955ac3.js"></script>
<script src="/65.fc2dba12.js"></script>
<script src="/66.81df1f16.js"></script>
<script src="/935f2afb.f1e5e5bf.js"></script>
<script src="/64.4c9a6482.js"></script>
<script src="/b65b0bc4.3fad35d3.js"></script>
</body>
</html>