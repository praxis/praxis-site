"use strict";(self.webpackChunkpraxis_site=self.webpackChunkpraxis_site||[]).push([[8978],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),f=i,m=p["".concat(l,".").concat(f)]||p[f]||u[f]||r;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},1241:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const r={title:"Traits"},o=void 0,s={unversionedId:"reference/design/traits",id:"reference/design/traits",title:"Traits",description:"Sometimes one wants to reuse common definition functionality across your entire API, which can be applied across different endpoints and actions. Praxis has the concept of Traits, to achieve this goal.",source:"@site/docs/reference/design/traits.md",sourceDirName:"reference/design",slug:"/reference/design/traits",permalink:"/docs/reference/design/traits",draft:!1,tags:[],version:"current",frontMatter:{title:"Traits"},sidebar:"mainSidebar",previous:{title:"Responses",permalink:"/docs/reference/design/response-definitions"},next:{title:"Document Generation",permalink:"/docs/reference/design/doc-generation"}},l={},c=[{value:"Declaring a Trait",id:"declaring-a-trait",level:2},{value:"Using a Trait",id:"using-a-trait",level:2}],d={toc:c},p="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Sometimes one wants to reuse common definition functionality across your entire API, which can be applied across different endpoints and actions. Praxis has the concept of Traits, to achieve this goal."),(0,i.kt)("h2",{id:"declaring-a-trait"},"Declaring a Trait"),(0,i.kt)("p",null,"Traits are defined and registered through the ApiDefinition singleton. A trait definition requires a globally unique name and a block of DSL elements. The block is used to instantiate an instance of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Trait")," class that is registered on the ApiDefinition singleton with the given name. You can think of a trait as a copy-pasteable block of code that you can refer to by name."),(0,i.kt)("p",null,"Here are a couple of example trait definitions:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ruby"},'Praxis::ApiDefinition.define do\n  trait :data_range do\n    params do\n      attribute :start_at, DateTime\n      attribute :end_at, DateTime\n    end\n  end\n\n  trait :authenticated do\n    headers do\n      key "Auth-Token", String, required: true\n    end\n  end\nend\n')),(0,i.kt)("p",null,"The first example creates a trait named ",(0,i.kt)("inlineCode",{parentName:"p"},"data_range")," which defines two incoming parameters, ",(0,i.kt)("inlineCode",{parentName:"p"},"start_at")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"end_at"),". If you write an action that uses this trait, it would be as if you had added this params block directly to your action. "),(0,i.kt)("p",null,"The second example creates a trait named ",(0,i.kt)("inlineCode",{parentName:"p"},"authenticated"),". All it does is define a required header named ",(0,i.kt)("inlineCode",{parentName:"p"},"Auth-Token")," for you to use in your actions."),(0,i.kt)("h2",{id:"using-a-trait"},"Using a Trait"),(0,i.kt)("p",null,"To use a trait, call the ",(0,i.kt)("inlineCode",{parentName:"p"},"trait")," method from within your action or endpoint, and pass the name of the trait you want to use. That will essentially bring over the block defined by that trait, as if you were creating it in place."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ruby"},"class Blogs\n  include Praxis::EndpointDefinition\n\n  # the 'authenticated' trait will be applied to all actions.\n  trait :authenticated\n\n  action :index\n    # the 'data_range' trait will only be used by the index action\n    trait :data_range\n  end\nend\n")),(0,i.kt)("p",null,"In this case, all actions in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Blogs")," resource definition will have the\n",(0,i.kt)("inlineCode",{parentName:"p"},"Auth-Token")," header defined. The ",(0,i.kt)("inlineCode",{parentName:"p"},"index")," action will have ",(0,i.kt)("inlineCode",{parentName:"p"},":start_at")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},":end_at")," params defined. You can think of ",(0,i.kt)("inlineCode",{parentName:"p"},"trait :trait_name")," as a cut-and-paste\nmechanism which allows you to reuse common snippets of design-time code."))}u.isMDXComponent=!0}}]);